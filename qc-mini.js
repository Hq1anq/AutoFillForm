(async()=>{let e='[data-automation-id="choiceItem"] input[type="radio"]',t='[data-automation-id="choiceItem"] input[type="checkbox"]',n={caseInsensitive:!0,verbose:!0,keywordThreshold:.2};async function l(e){let t=await fetch(e);if(!t.ok)throw Error(`âŒ Kh\xf4ng thá»ƒ táº£i file JSON (${t.status})`);let n=await t.json();return console.log(`âœ… Táº£i th\xe0nh c\xf4ng ${n.length||Object.keys(n).length} Ä‘\xe1p \xe1n tá»« JSON`),n}let r=e=>n.caseInsensitive?String(e||"").toLowerCase().trim():String(e||"").trim();function i(n,l,i){let o=r(n),a=Array.from(l.querySelectorAll(`${e}, ${t}`)).map(e=>r(e.closest("label")?.innerText||e.getAttribute("value")||"")),u=[];if(Array.isArray(i)){if(!(u=i.filter(e=>o.includes(r(e.question)))).length)return null;let s=l.querySelectorAll(t).length>0;if(s){let c=[];for(let h of u){let g=Array.isArray(h.answer)?h.answer:[h.answer];for(let f of g){let d=r(f);a.some(e=>e.includes(d)||d.includes(e))&&c.push(f)}if(c.length)return{question:n,answer:c}}}else for(let y of u){let m=r(Array.isArray(y.answer)?y.answer[0]:y.answer);if(a.some(e=>e.includes(m)||m.includes(e)))return{question:n,answer:Array.isArray(y.answer)?y.answer[0]:y.answer}}}else{let w=Object.keys(i).find(e=>o.includes(r(e)));if(w)return{question:w,answer:i[w]}}return null}function o(n,l,i){let o=n.querySelectorAll(t).length>0,a=Array.isArray(l)?l:[l],u=n.querySelectorAll(o?t:e),s=[];for(let c of a){let h=r(c);for(let g of u){let f=r(g.closest("label")?.innerText||g.getAttribute("value")||"");if(f.includes(h)||h.includes(f)){g.checked||g.click(),s.push(f);break}}}return s.length>0?(o?console.log(`ğŸ¯ [C\xe2u ${i+1}] Ä\xe3 chá»n ${s.length} Ä‘\xe1p \xe1n: ${s.map(e=>`"${e}"`).join(", ")}`):console.log(`ğŸ¯ [C\xe2u ${i+1}] Ä\xe3 chá»n Ä‘\xe1p \xe1n "${s[0]}"`),!0):(console.log(`âš ï¸ [C\xe2u ${i+1}] Kh\xf4ng t\xecm tháº¥y lá»±a chá»n ph\xf9 há»£p cho: "${a.join(", ")}"`),!1)}async function a(){let e=await l("https://raw.githubusercontent.com/hq1anq/AutoFillForm/main/qc.json"),r=document.querySelectorAll('[data-automation-id="questionItem"]');if(r.length)console.log(`ğŸ” T\xecm tháº¥y ${r.length} c\xe2u há»i.`);else{console.warn("âš ï¸ Kh\xf4ng t\xecm tháº¥y pháº§n tá»­ c\xe2u há»i â€” vui l\xf2ng kiá»ƒm tra SELECTOR_QUESTION_ITEM!");return}let a=0,u=[];if(r.forEach((l,r)=>{let s=l.querySelector('[data-automation-id="questionTitle"]')?.innerText.trim()||"";if(!s)return;if(l.querySelector('textarea[data-automation-id="textInput"]')){l.style.border="3px solid orange",u.push({index:r+1,text:s}),n.debug&&console.log(`âœï¸ [C\xe2u ${r+1}] Ph\xe1t hiá»‡n c\xe2u há»i tá»± luáº­n â€” Ä‘\xe3 skip.`);return}l.querySelectorAll(t);let c=i(s,l,e);if(!c){console.log(`âŒ [C\xe2u ${r+1}] Kh\xf4ng c\xf3 Ä‘\xe1p \xe1n trong JSON cho: "${s}"`);return}let h=o(l,c.answer,r);h&&a++}),console.log(`âœ… Ho\xe0n táº¥t: ${a}/${r.length} c\xe2u Ä‘\xe3 Ä‘Æ°á»£c Ä‘iá»n.`),u.length){let s=u.map(e=>e.index).join(", ");console.warn(`ğŸŸ  C\xf3 ${u.length} c\xe2u tá»± luáº­n cáº§n tá»± Ä‘iá»n: ${s}`)}}await a()})();